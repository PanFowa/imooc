<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
		<ul id="list">
			<li class="on">1</li>
			<li class="select">2</li>
			<li class="on">3</li>
			<li>4</li>
		</ul>
		<p class="on">class为on的p标签</p>
</body>
</html>
<script type="text/javascript">
  window.onload=function(){
     var len1= getByClass("on","list");
     alert(len1.length);  // 结果等于2为正确
var len2= getByClass("on");
     alert(len2.length);  // 结果等于3为正确
}
function getByClass(clsName, parent){
 //定义函数getByClass()实现获取document或指定父元素下所有class为on的元素  

var oParent = document;//只传一个参数时,parent默认为document
//有第二个参数，则parent从第二个参数中取
if(arguments[1]){oParent = document.getElementById(parent);}

//浏览器支持document.getElementsByClassName，则使用该函数返回符合的元素
if(document.getElementsByClassName){return oParent.getElementsByClassName(clsName);}
//不支持document.getElementsByClassName则获取指定元素下的所有元素，再进行遍历取出符合条件的元素
else{
//取parent下的所有元素
var childen = parent.getElementByTagName("*");

//定义数组，存放符合条件的元素
var arr = [];
//循环取class是on的元素，并存入数组arr
for(var i=0;i<childen.length;i++){
    var child = childen[i];
    if(chid.className == "on"){
        arr.push(child);
    }
 }
 
 return arr;
}
}
</script>
